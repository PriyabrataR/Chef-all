###
# Generated by Chef
###

#
# monit control file
#
#<%= @node[:ec2] %>

set daemon 120 # Poll at 2-minute intervals
set logfile syslog facility log_daemon
#set alert alert@example.com # TODO: Find alert email
set eventqueue basedir /var/monit slots 1000
#set mmonit http://usename:pass@example.com:8080/collector 
set httpd port 7676
      allow 127.0.0.1
      allow localhost
      # TODO: Allow from master

# TODO: Find hostname
#check system example.com
#   if loadavg (1min) > 10 then alert
#   if loadavg (5min) > 10 then alert
#   if memory usage > 95% then alert
#   if cpu usage (user) > 90% then alert
#   if cpu usage (system) > 30% then alert
#   if cpu usage (wait) > 20% then alert

# TODO: Find and iterate over partitions
#check filesystem rootfs with path /dev/hda3
# if space usage > 85% 5 times within 15 cycles
#    then alert



